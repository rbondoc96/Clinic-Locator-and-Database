{% extends "./base.html" %}

{% load crispy_forms_tags %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'locator/css/new.css' %}">
{% endblock styles %}

{% block title %}
    Add New Location
{% endblock title %}

{% block content %}

<div class="container-fluid" id="content">
    <div class="row">
        <div class="col-lg-7 ml-2 mt-4">
            <div class="mb-4">
                <h2 class="mb-3" id="content-header">Add a Location</h2>
                <p>Please fill out all required fields.</p>
            </div>
            <div class="m-auto form-group">
                <form method="POST" id="location-form">
                    {% csrf_token %}
        
                    {{ form.last_verified }}
                    {{ form.location_category|as_crispy_field }}
                    <div class="form-row">
                        <div class="col">
                            {{ form.location_name|as_crispy_field }}
                        </div>
                        <div class="col">
                            {{ form.location_branch_name|as_crispy_field }}
                        </div>
                    </div>
        
                    <div class="form-row">
                        <div class="col">
                            {{ form.street_line_1|as_crispy_field }}
                        </div>
                        <div class="col">
                            {{ form.street_line_2|as_crispy_field }}
                        </div>
                    </div>
        
                    <div class="form-row">
                        <div class="col-7">
                            {{ form.city|as_crispy_field }}
                        </div>
                        <div class="col-2">
                            {{ form.state|as_crispy_field }}
                        </div>
                        <div class="col">
                            {{ form.zipcode|as_crispy_field }}
                        </div>
                    </div>
        
                    <div class="form-row">
                        <div class="col">
                            {{ form.phone|as_crispy_field }}
                            {{ form.is_phone_callable|as_crispy_field }}
                        </div>
                        <div class="col">
                            {{ form.fax|as_crispy_field }}
                        </div>
                    </div>
        
                    {{ form.website|as_crispy_field }}
                    <div class="d-none" id="urlErrMsg">
                        <p style="color: red; font-weight:600; font-size:0.8rem">
                            Please enter a valid URL!
                        </p>
                    </div>
        
                    {% include "locator/modals/contacts-modal.html" %}
                    
                    {% include "locator/modals/oh-modal.html" %}
        
                    {% include "locator/modals/sh-modal.html" %}             
        
                    <div class="form-row pt-2">
                        <div class="col-5">
                            {{ form.service_list|as_crispy_field }}
                        </div>
                        <div class="col-3">
                            {{ form.ccf_category_list|as_crispy_field }}
                        </div>
                        <div class="col-4">
                            {{ form.auth_method_list|as_crispy_field }}
                        </div>
                    </div>
        
                    {{ form.comments|as_crispy_field }}
                </form>
            </div>
        </div>
        <div class="col-lg-3 ml-4 mt-2">
            <div class="row pt-2 mt-3">
            </div>
            <div class="row mt-2 mb-2">
                <a 
                href="#" 
                class="modal-link m-auto"
                data-toggle="modal"
                data-target="#contacts-modal"
                >
                    Add Contacts
                </a>
            </div>
            <div class="row">
                <ul id="contacts-list" class="list-group m-auto w-100"></ul>
            </div>
            <div class="row mt-2 mb-2">
                <a 
                href="#" 
                class="modal-link m-auto"
                data-toggle="modal"
                data-target="#op-hours-modal"
                >
                    Add Hours of Operation
                </a>
            </div>
            <div class="row">
                <ul id="op-hours-list" class="location-sublist list-group m-auto w-100">
                </ul>
            </div>
            <div class="row mt-2 mb-2">
                <a 
                href="#" 
                class="modal-link m-auto"
                data-toggle="modal"
                data-target="#serv-hours-modal"
                >
                    Add Service Hours
                </a>
            </div>
            <div class="row">
                <ul id="serv-hours-list" class="location-sublist list-group m-auto w-100">
                </ul>
            </div>
        </div>
    </div>
    <div id="buttons" class="row ml-2 mt-1">
        <button type="button" class="btn mr-1" form="location-form" id="submit-btn">
            Add Location
        </button>
        <button type="reset" class="btn ml-1" form="location-form">
            Clear Form
        </button> 
    </div>
</div>
{% endblock content %}

{% block scripts %}
<script src = "{% static 'locator/js/dist/jquery.inputmask.js' %}"></script>
<script src="{% static 'locator/js/new.js' %}"></script>
{% endblock scripts %}